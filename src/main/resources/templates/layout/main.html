<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${titulo != null ? titulo + ' - CartillasAceroWeb' : 'CartillasAceroWeb - SENA'}">CartillasAceroWeb</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- CSS personalizado -->
    <link th:href="@{/css/estilos.css}" rel="stylesheet">

    <!-- Meta tags adicionales -->
    <meta name="description" content="Sistema de gesti√≥n de proyectos - Evidencia SENA GA7-220501096-AA3-EV01">
    <meta name="author" content="Nelson Rodriguez">
    <meta name="keywords" content="SENA, Spring Boot, Thymeleaf, Gesti√≥n Proyectos">
</head>
<body>
<!-- Navbar principal -->
<nav th:fragment="navbar" class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
    <div class="container">
        <!-- Brand/Logo -->
        <a class="navbar-brand fw-bold" th:href="@{/proyectos}">
            <i class="bi bi-building"></i> CartillasAceroWeb
        </a>

        <!-- Bot√≥n toggle para m√≥viles -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Men√∫ de navegaci√≥n -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/}"
                       th:classappend="${#httpServletRequest.requestURI == '/' or #httpServletRequest.requestURI == '/inicio' ? 'active' : ''}">
                        <i class="bi bi-house-door"></i> Inicio
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/proyectos}"
                       th:classappend="${#request.requestURI == '/proyectos' ? 'active' : ''}">
                        <i class="bi bi-list-ul"></i> Lista de Proyectos
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/proyectos/nuevo}"
                       th:classappend="${#strings.contains(#request.requestURI, '/nuevo') ? 'active' : ''}">
                        <i class="bi bi-plus-circle"></i> Nuevo Proyecto
                    </a>
                </li>
            </ul>

            <!-- Informaci√≥n acad√©mica -->
            <span class="navbar-text">
                    <i class="bi bi-mortarboard"></i> SENA - GA7-220501096-AA3-EV01
                </span>
        </div>
    </div>
</nav>

<!-- √Årea de contenido principal -->
<main class="min-vh-100">
    <!-- Contenedor de mensajes flash -->
    <div th:fragment="mensajes" class="container mt-3">
        <!-- Mensaje de √©xito -->
        <div th:if="${exito}" class="alert alert-success alert-dismissible fade show">
            <i class="bi bi-check-circle-fill"></i>
            <span th:text="${exito}">Mensaje de √©xito</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Mensaje de error -->
        <div th:if="${error}" class="alert alert-danger alert-dismissible fade show">
            <i class="bi bi-exclamation-triangle-fill"></i>
            <span th:text="${error}">Mensaje de error</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Mensaje informativo -->
        <div th:if="${info}" class="alert alert-info alert-dismissible fade show">
            <i class="bi bi-info-circle-fill"></i>
            <span th:text="${info}">Mensaje informativo</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Mensaje de advertencia -->
        <div th:if="${advertencia}" class="alert alert-warning alert-dismissible fade show">
            <i class="bi bi-exclamation-triangle-fill"></i>
            <span th:text="${advertencia}">Mensaje de advertencia</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    </div>

    <!-- Contenido espec√≠fico de cada p√°gina -->
    <div th:fragment="contenido">
        <!-- Este fragmento ser√° reemplazado por el contenido de cada vista -->
        <div class="container mt-4">
            <h1>Contenido de la p√°gina</h1>
            <p>Este contenido ser√° reemplazado por cada vista espec√≠fica.</p>
        </div>
    </div>
</main>

<!-- Footer acad√©mico -->
<footer th:fragment="footer" class="bg-light border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <!-- Informaci√≥n institucional -->
            <div class="col-lg-4 mb-3">
                <h6 class="fw-bold text-primary">
                    <i class="bi bi-mortarboard"></i> Informaci√≥n Acad√©mica
                </h6>
                <ul class="list-unstyled small text-muted">
                    <li><i class="bi bi-building"></i> <strong>SENA</strong> - Servicio Nacional de Aprendizaje</li>
                    <li><i class="bi bi-book"></i> An√°lisis y Desarrollo de Software</li>
                    <li><i class="bi bi-file-earmark-code"></i> Evidencia: GA7-220501096-AA3-EV01</li>
                    <li><i class="bi bi-calendar-event"></i> Fase de Ejecuci√≥n - Julio 2025</li>
                </ul>
            </div>

            <!-- Informaci√≥n t√©cnica -->
            <div class="col-lg-4 mb-3">
                <h6 class="fw-bold text-success">
                    <i class="bi bi-gear"></i> Stack Tecnol√≥gico
                </h6>
                <ul class="list-unstyled small text-muted">
                    <li><i class="bi bi-cup-hot"></i> Java 22 + Spring Boot 3.2.0</li>
                    <li><i class="bi bi-database"></i> MySQL 8.0 + Spring Data JPA</li>
                    <li><i class="bi bi-file-earmark-text"></i> Thymeleaf + Bootstrap 5</li>
                    <li><i class="bi bi-tools"></i> Maven + Lombok + DevTools</li>
                </ul>
            </div>

            <!-- Informaci√≥n del desarrollador -->
            <div class="col-lg-4 mb-3">
                <h6 class="fw-bold text-info">
                    <i class="bi bi-person-badge"></i> Desarrollador
                </h6>
                <ul class="list-unstyled small text-muted">
                    <li><i class="bi bi-person"></i> <strong>Nelson Rodriguez</strong></li>
                    <li><i class="bi bi-envelope"></i> Estudiante SENA</li>
                    <li><i class="bi bi-code-square"></i> Versi√≥n: 3.0 - Spring Boot</li>
                    <li><i class="bi bi-github"></i> Repositorio: CartillasAceroWeb</li>
                </ul>
            </div>
        </div>

        <!-- L√≠nea de copyright -->
        <hr class="my-3">
        <div class="row align-items-center">
            <div class="col-md-6">
                <small class="text-muted">
                    ¬© 2025 Nelson Rodriguez - SENA. Proyecto Acad√©mico.
                </small>
            </div>
            <div class="col-md-6 text-end">
                <small class="text-muted">
                    <i class="bi bi-heart-fill text-danger"></i>
                    Desarrollado con Spring Boot + Thymeleaf
                </small>
            </div>
        </div>
    </div>
</footer>

<!-- Scripts JavaScript -->
<div th:fragment="scripts">
    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript personalizado -->
    <script th:src="@{/js/scripts.js}"></script>

    <!-- Script global para toda la aplicaci√≥n -->
    <script>
        // Auto-dismiss de alertas despu√©s de 5 segundos
        document.addEventListener('DOMContentLoaded', function() {
            const alerts = document.querySelectorAll('.alert:not(.alert-danger)');
            alerts.forEach(function(alert) {
                setTimeout(function() {
                    const bsAlert = new bootstrap.Alert(alert);
                    if (bsAlert) {
                        bsAlert.close();
                    }
                }, 5000);
            });
        });

        // Confirmar navegaci√≥n si hay formularios con cambios
        let formModificado = false;

        document.addEventListener('DOMContentLoaded', function() {
            const forms = document.querySelectorAll('form');
            forms.forEach(function(form) {
                const initialData = new FormData(form);

                form.addEventListener('input', function() {
                    formModificado = true;
                });

                form.addEventListener('submit', function() {
                    formModificado = false;
                });
            });

            // Warning si hay cambios no guardados
            window.addEventListener('beforeunload', function(e) {
                if (formModificado) {
                    e.preventDefault();
                    e.returnValue = '¬øEst√° seguro de salir? Hay cambios sin guardar.';
                }
            });
        });

        // Funci√≥n para mostrar notificaciones toast
        function mostrarToast(mensaje, tipo = 'info') {
            const toastContainer = document.getElementById('toast-container') || crearToastContainer();

            const toastElement = document.createElement('div');
            toastElement.className = `toast align-items-center text-bg-${tipo} border-0`;
            toastElement.setAttribute('role', 'alert');

            toastElement.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">
                        <i class="bi bi-${tipo === 'success' ? 'check-circle' : tipo === 'danger' ? 'exclamation-triangle' : 'info-circle'}"></i>
                        ${mensaje}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;

            toastContainer.appendChild(toastElement);

            const toast = new bootstrap.Toast(toastElement, { delay: 4000 });
            toast.show();

            // Remover elemento despu√©s de ocultarse
            toastElement.addEventListener('hidden.bs.toast', function() {
                toastElement.remove();
            });
        }

        function crearToastContainer() {
            const container = document.createElement('div');
            container.id = 'toast-container';
            container.className = 'toast-container position-fixed bottom-0 end-0 p-3';
            document.body.appendChild(container);
            return container;
        }
    </script>
</div>

<!-- √Årea para scripts espec√≠ficos de p√°gina -->
<div th:fragment="scripts-adicionales">
    <!-- Las p√°ginas individuales pueden agregar scripts espec√≠ficos aqu√≠ -->
</div>

</body>
</html>

<!--
================================================================================
DOCUMENTACI√ìN COMPLETA DE main.html (Layout Base)
================================================================================

PROP√ìSITO:
----------
Layout base Thymeleaf que proporciona la estructura com√∫n para todas las vistas
de la aplicaci√≥n. Define fragmentos reutilizables (navbar, footer, scripts) y
la estructura HTML base que mantiene consistencia visual y funcional en toda
la aplicaci√≥n.

INFORMACI√ìN ACAD√âMICA:
----------------------
Programa:     An√°lisis y Desarrollo de Software - SENA
Evidencia:    GA7-220501096-AA3-EV01
Tecnolog√≠a:   Thymeleaf Fragments + Bootstrap 5
Ubicaci√≥n:    src/main/resources/templates/layout/main.html
Autor:        Nelson Rodriguez

FRAGMENTOS DEFINIDOS:
--------------------

1. ESTRUCTURA COMPLETA:
   - HTML base con meta tags completos
   - T√≠tulo din√°mico seg√∫n la p√°gina
   - Links a CSS y frameworks externos

2. th:fragment="navbar":
   - Navbar Bootstrap responsivo
   - Men√∫ de navegaci√≥n con links activos
   - Brand/logo con enlace a inicio
   - Informaci√≥n acad√©mica visible
   - Collapse menu para m√≥viles

3. th:fragment="mensajes":
   - Sistema completo de mensajes flash
   - 4 tipos: √©xito, error, info, advertencia
   - Auto-dismiss y botones de cierre
   - Iconos contextuales

4. th:fragment="contenido":
   - √Årea principal para contenido espec√≠fico
   - Container Bootstrap para layout consistente
   - Placeholder que ser√° reemplazado

5. th:fragment="footer":
   - Footer acad√©mico completo
   - Informaci√≥n institucional del SENA
   - Stack tecnol√≥gico implementado
   - Datos del desarrollador
   - Copyright y versi√≥n

6. th:fragment="scripts":
   - Bootstrap JS bundle
   - Scripts personalizados globales
   - Funciones JavaScript reutilizables
   - Auto-dismiss de alertas

7. th:fragment="scripts-adicionales":
   - √Årea para scripts espec√≠ficos de p√°gina
   - Extensibilidad para funcionalidades particulares

USO EN OTRAS VISTAS:
-------------------

Las vistas pueden usar este layout de varias formas:

1. INCLUIR FRAGMENTOS ESPEC√çFICOS:
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/main :: head"></head>
<body>
    <nav th:replace="layout/main :: navbar"></nav>

    <main>
        <div th:replace="layout/main :: mensajes"></div>
        <!-- Contenido espec√≠fico de la p√°gina -->
</main>

<footer th:replace="layout/main :: footer"></footer>
<div th:replace="layout/main :: scripts"></div>
</body>
</html>
```

2. USAR LAYOUT COMPLETO CON REEMPLAZO:
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="layout/main">
<body>
<div th:fragment="contenido">
    <!-- Contenido espec√≠fico aqu√≠ -->
</div>
</body>
</html>
```

CARACTER√çSTICAS DEL NAVBAR:
---------------------------

1. NAVEGACI√ìN INTELIGENTE:
- Links activos autom√°ticos basados en URL
- Responsive collapse para m√≥viles
- Brand clickeable que va a inicio

2. ELEMENTOS INCLUIDOS:
- Lista de Proyectos (con indicador activo)
- Nuevo Proyecto (con indicador activo)
- Informaci√≥n acad√©mica de la evidencia

3. CLASES BOOTSTRAP:
- navbar-dark bg-primary: Tema azul oscuro
- sticky-top: Se mantiene fijo arriba
- container: Centrado y responsive

SISTEMA DE MENSAJES:
-------------------

1. TIPOS DE MENSAJES:
- ${exito}: alert-success (verde)
- ${error}: alert-danger (rojo)
- ${info}: alert-info (azul)
- ${advertencia}: alert-warning (amarillo)

2. CARACTER√çSTICAS:
- Auto-dismissible con bot√≥n X
- Iconos Bootstrap apropiados
- Fade in/out autom√°tico
- Auto-dismiss despu√©s de 5 segundos (excepto errores)

FOOTER ACAD√âMICO:
----------------

1. INFORMACI√ìN INSTITUCIONAL:
- Datos completos del SENA
- Programa de formaci√≥n
- C√≥digo de evidencia
- Fase de proyecto

2. STACK TECNOL√ìGICO:
- Versiones exactas de tecnolog√≠as
- Frameworks utilizados
- Herramientas de desarrollo

3. DESARROLLADOR:
- Informaci√≥n del estudiante
- Versi√≥n del proyecto
- Referencias del repositorio

JAVASCRIPT GLOBAL:
-----------------

1. AUTO-DISMISS DE ALERTAS:
- Mensajes no cr√≠ticos se ocultan autom√°ticamente
- Errores permanecen hasta cierre manual
- Transiciones suaves

2. DETECCI√ìN DE CAMBIOS EN FORMULARIOS:
- Warning antes de salir si hay cambios
- Prevenci√≥n de p√©rdida de datos
- Reset al enviar formulario

3. SISTEMA DE TOASTS:
- Funci√≥n mostrarToast() global
- Notificaciones no intrusivas
- Tipos: success, danger, info
- Auto-posicionamiento y limpieza

RESPONSIVIDAD:
-------------

1. BREAKPOINTS:
- Mobile-first design
- Navbar collapse en pantallas peque√±as
- Footer adaptable con columnas flexibles
- Containers Bootstrap responsive

2. COMPONENTES ADAPTATIVOS:
- Men√∫s que se convierten en hamburger
- Footer que apila columnas en m√≥viles
- Alertas que se adaptan al ancho

META TAGS Y SEO:
---------------

1. META TAGS B√ÅSICOS:
- Charset UTF-8 para caracteres especiales
- Viewport responsive
- Description para motores de b√∫squeda

2. META TAGS ACAD√âMICOS:
- Author: Nelson Rodriguez
- Keywords: SENA, Spring Boot, etc.
- Description espec√≠fica del proyecto

EXTENSIBILIDAD:
--------------

1. CSS PERSONALIZADO:
- Link a /css/estilos.css
- Sobrescribe estilos de Bootstrap
- Temas personalizados

2. SCRIPTS ADICIONALES:
- Fragmento scripts-adicionales
- Cada vista puede agregar JS espec√≠fico
- Orden de carga controlado

3. CONTENIDO DIN√ÅMICO:
- T√≠tulos variables seg√∫n p√°gina
- Navegaci√≥n activa autom√°tica
- Mensajes contextuales

INTEGRACI√ìN CON SPRING BOOT:
---------------------------

1. THYMELEAF EXPRESSIONS:
- @{/ruta}: URLs absolutas
- ${variable}: Variables del modelo
- #request.requestURI: Informaci√≥n de request

2. FRAGMENT REPLACEMENT:
- th:replace: Reemplaza completamente
- th:insert: Inserta dentro del elemento
- th:include: Incluye solo el contenido

3. CONDICIONALES:
- th:if: Mostrar si existe variable
- th:classappend: CSS condicional
- th:text: Contenido din√°mico

BENEFICIOS DEL LAYOUT:
---------------------

1. CONSISTENCIA:
- Mismo navbar en todas las p√°ginas
- Footer uniforme
- Mensajes estandarizados

2. MANTENIBILIDAD:
- Cambios centralizados
- Un solo lugar para scripts globales
- Estructura reutilizable

3. PERFORMANCE:
- Carga √∫nica de recursos comunes
- Fragmentos cacheable
- Scripts optimizados

4. UX UNIFORME:
- Navegaci√≥n predecible
- Mensajes consistentes
- Comportamiento est√°ndar

EVIDENCIA DE COMPETENCIAS:
-------------------------
1. üéØ Dominio de Thymeleaf fragments
2. üèóÔ∏è Arquitectura de templates modular
3. üíæ Integraci√≥n completa con Spring MVC
4. üìù Responsive design con Bootstrap
5. üîß JavaScript modular y reutilizable
6. üß™ Sistema de mensajes robusto
7. üìä Layout acad√©mico profesional

MEJORES PR√ÅCTICAS IMPLEMENTADAS:
-------------------------------
- Separaci√≥n de concerns (estructura, estilo, comportamiento)
- Fragmentos reutilizables y modulares
- Meta tags completos para SEO
- JavaScript no intrusivo
- Accesibilidad con roles y labels apropiados
- Performance optimizado con CDNs
- Estructura sem√°ntica HTML5

AUTOR: Nelson Rodriguez
EVIDENCIA: GA7-220501096-AA3-EV01
FECHA: 2025-07-07
VERSI√ìN: 3.0 (Thymeleaf Layout System)

===============================================================================